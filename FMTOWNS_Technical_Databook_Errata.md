# FM TOWNS テクニカルデータブックの正誤表

# FM TOWNS Technical Databook Errata


FM TOWNSテクニカルデータブックは、FM TOWNSが現役だった当時かなり助けられました。アプリケーションプログラムを書く分には何も支障が無かったですが、エミュレータを書こうと思ったらいくつもの誤りを発見してしたのでまとめてみました。新しいのを見つけるたびに追加する予定です。



## pp.12
### 図I-1-6

8x8, 8x16ドットフォントのマッピング

(誤)
```
000CA000H 漢字ROMアドレス1E000H
000CA800H 漢字ROMアドレス1E800H
000CB000H 漢字ROMアドレス1E800H
000CBFFFH 漢字ROMアドレス1F800H
```

(正)
```
000CA000H 漢字ROMアドレス3D000H
000CA800H 漢字ROMアドレス3D800H
000CB000H 漢字ROMアドレス3D800H
000CBFFFH 漢字ROMアドレス3E800H
```



## pp.57-
### 3.2 割り込み全般
「Specific」という単語を「特殊」と訳してるんだけど、多分誤訳。「Special」と見間違えた？「特定」とかいう方が合ってると思う。「特殊EOIコマンド」とか「非特殊EOIコマンド」とか何のことかと思った。

あと、"Fully Nested Mode"をフリーネステドモードと訳してるんだけど、それはちょっとあんまりなんでない？"Free nested mode"かと思ったよ。"Specific"を日本語に訳すんだったら、"Fully"もきちんと「全ネステドモード」とかにしてほしかった。

これは著者の誤訳か、あるいはPICのデータシートを訳した人から間違ったのかはわからんけど。



## pp.78
~~### 表 I-3-25
タイマーカウントレジスタはそれぞれ16ビットなのに、8ビット分しか書いてない。
本文の方に「16ビット」と書いてあるから表のビット数は無視。~~

これは僕の勘違いだった模様。多分途中で16ビットアクセス可能にしたらたまたま何かが動くようになったとかあったのかもしれない、けどやっぱり8ビットアクセスが正しかった。


## pp.90
### ID RESETの記述

「チップセレクトがアクティブで、クロックが1のとき」

クロックは1で無くても良い。フリコレ6のブートセクタ内で 00H 80H 00Hの順に書き込んでアドレスリセットしている。



## pp.194
「スロットは、個別にエンベロープ信号を接続するかどうかのスイッチを持っているので、スロットごとにエンベロープ変調をかけるかどうかを選択できます。」

そんなレジスタは無い。できない模様。実際のアプリケーションでオフにする場合はTLを127にしている模様。

すべてのスロットにエンベロープがかかるし、上流の変調用スロットもDbスケールがかかってる。あと、どこにも記述が無いけど、各スロットの出力をdBスケールから線形スケールに変換して1.0が変調度の8PIに対応する。



## pp.201
### 表I-5-23
図ではレジスタ25Hは下位3ビットのように見えるが実際は下位2ビット。



## pp.204
NOTE計算式。F11って書いてあるけどF-Numberは11ビットだから最上位ビットはF10だから。だから、N4=F10, N3=F10*(F9+F8+F7)+~F10*F9*F8*F7 と解釈するか?

ただ、これYM2608(CMOS版YM2612)のアプリケーションマニュアルにも同じ記述があるから、何が正しいのかは不明。



## pp.212
### 表I-5-37
そもそもMMLの書き方としてA4と書いてあるのは変で、多分O4Aと書きたかったのではないか。

この表だとO4Aに対応するF-Numberは1153のはずだが、F-BASIC386で
```
PLAY "O4A"
```
とするとF-Numberは1038が書き込まれる。Sega Genesis Software Manual (Supplementary Index page 16) では"A"に対応するF-Numberは1037とある。当初ベースクロックが違うのかと思ってたけど多分FM TOWNSテクニカルデータブックの間違い。



## pp.257
### 表I-7-27 ドライブコントロールレジスタ

(誤)
```
HDISEL(bit2):リード/ライトの対象となるメディアの面を指定する。
       0=サイド1
       1=サイド0
```
(正)
```
HDISEL(bit2):リード/ライトの対象となるメディアの面を指定する。
       0=サイド0
       1=サイド1
```

## pp.262, 
```
IMSK(bit6)   0:割り込み許可   1:割り込み禁止
```
とあるけど、0が禁止、1が許可の模様。そうでないとBIOSの解析結果と矛盾するし、実際走らない。


## pp.773
```
DSKCHG flag:
  0=チェンジあり
  1=チェンジ無し
```
とあるけど、逆。


## pp.796
pp.262と同じエラー。


## pp.808 
### 7. FDドライブセレクトレジスタ。

R/Wの欄にR (Read)とあるけど、この図は、020CHのWriteの説明。

